<!DOCTYPE html>
<html>
  <head>
    <style>
    html, body { height:100%; width:100%;}
    #map {height: 100%;}
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      function initMap() {
        // Create a map object and specify the DOM element for display.
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 34.397, lng: 50.644},
          scrollwheel: false,
          zoom: 2
        });

        var labels = [];
        var locations = [];
        {% for building in buildings %}
          locations.push({lat: {{ building['latitude'] }}, lng: {{ building['longitude'] }}});
          labels.push('{{ building['city']+' '+ building['name'] }}');
        {% endfor %}

        var markers = locations.map(function(location, i) {
          return new google.maps.Marker({
            position: location,
            title: labels[i],
            icon : 'https://storage.googleapis.com/support-kms-prod/SNP_2752125_en_v0'
          });
        });

        // Add a marker clusterer to manage the markers.
        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
      }

    </script>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZcDdDorchlvUFV3VbiU-tqwTRU__47Ms&callback=initMap"
    async defer></script>